#!/bin/bash
#set -vx
#========================================================================================
# スクリプト名：TLS-ParmitPass.sh
# 概 要 　　　：秘密鍵を使用したopensslコマンドにて、パスワードの暗号及び復号を行う。また
#　　　 　　　：秘密鍵の作成も行う
# -hオプション：usage
# -gオプション：実行したユーザーホームディレクトリ以下の.sshに秘密鍵を作成する
# -kオプション：ファイルの暗号化を実施する
# -dオプション：ファイルの復号化を実施する
# 第二引数　　：-gオプション：秘密鍵の名前(未入力の場合はデフォルトのid-rsaになる)
#　　　　　　 ：-kオプション：暗号化するパスワード
# 　　　　　　：-dオプション：復号化するファイル
# 備考　　　　：暗号化する際は、暗号化後の文字列を出力するのでファイルにリダイレクトして
#  　　　　　 ：記録してください
#========================================================================================

#========================================================================================
# 変数/定数等
#========================================================================================

#========================================================================================
# 各オプションの処理記述項目
#========================================================================================

function key_generate() {
   # 秘密鍵の名前を格納
   sec_key_name=$(echo $2)

   echo '秘密鍵'"$sec_key_name"'を作成します'
   # 秘密鍵を作成
   ssh-keygen -t rsa -f "$sec_key_name"

   ls ~/.ssh/"$sec_key_name" >& /dev/null
   

   if [ $? -eq 0 ] ; then

      echo '秘密鍵の作成が完了しました。秘密鍵は以下のパスに存在します'
      find `pwd`/.ssh -maxdepth 1 -mindepth 1  | grep "$sec_key_name"

   fi   

}
#========================================================================================
# 事前処理
#========================================================================================

#========================================================================================
# 本処理
#========================================================================================

#========================================================================================
# 事後処理
#========================================================================================

